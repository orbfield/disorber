"use strict";(self.webpackChunkdisorber_docs=self.webpackChunkdisorber_docs||[]).push([[610],{610:(e,n,t)=>{t.r(n),t.d(n,{default:()=>p});var s=t(6),i=t(376),o=t(374);const r=(0,s.createContext)(),a=e=>{let{children:n}=e;const[t,i]=(0,s.useState)(null),[a,d]=(0,s.useState)(null),[l,c]=(0,s.useState)("Loading..."),[p,u]=(0,s.useState)("");(0,s.useEffect)((()=>{const e=setInterval((()=>{u((e=>e.length>=3?"":e+"."))}),500);return()=>clearInterval(e)}),[]),(0,s.useEffect)((()=>{(async()=>{try{if("undefined"===typeof WebAssembly){const e="WebAssembly is not supported in this browser.\nPlease use a modern browser that supports WebAssembly.";throw d(e),new Error(e)}if("undefined"===typeof SharedArrayBuffer){const e="SharedArrayBuffer is not supported in this browser.\nThis could be due to:\n1. Browser security settings\n2. Missing COOP/COEP headers\n3. Using an unsupported browser\n\nTry using a different browser or enabling cross-origin isolation.";throw d(e),new Error(e)}if(!window.loadPyodide){const e="Pyodide script not found. This could be due to:\n1. Network connectivity issues\n2. CDN being temporarily unavailable\n3. Content blocker preventing script load\n\nTry refreshing the page or checking your internet connection.\n\nConsole logs may provide additional details.";throw d(e),new Error(e)}console.log("Browser capabilities:",{webAssembly:"undefined"!==typeof WebAssembly,sharedArrayBuffer:"undefined"!==typeof SharedArrayBuffer,crossOriginIsolated:window.crossOriginIsolated,pyodideAvailable:"undefined"!==typeof window.loadPyodide}),c("Checking environment..."),console.log("Starting Pyodide initialization...");const t=setTimeout((()=>{d("Pyodide initialization timed out after 30 seconds. This may indicate:\n1. Slow internet connection\n2. Browser memory constraints\n3. CPU/resource limitations\n\nTry refreshing the page or closing other browser tabs.")}),3e4),s=await window.loadPyodide({indexURL:"https://cdn.jsdelivr.net/pyodide/v0.27.2/full/",stdout:e=>{console.log("Pyodide stdout:",e),c((n=>n+"\n"+e))},stderr:e=>{console.error("Pyodide stderr:",e),d((n=>n?`${n}\n${e}`:e))}});try{console.log("Testing Python execution..."),c("Testing Python execution...");const e=s.runPython("import sys; sys.version");console.log("Python version:",e),c((n=>`${n}\nPython version: ${e}`))}catch(e){throw console.error("Failed basic Python test:",e),d((n=>`${n}\nFailed basic Python test: ${e.message}`)),e}c("Loading packages...");try{console.log("Loading numpy package..."),c("Loading numpy package..."),await s.loadPackage("numpy",{messageCallback:e=>{console.log("Loading numpy:",e),c((n=>`${n}\nNumpy: ${e}`))},checkIntegrity:!1});try{console.log("Testing numpy..."),c((e=>`${e}\nTesting numpy...`)),s.runPython("import numpy as np; np.array([1,2,3])"),console.log("Numpy test successful"),c((e=>`${e}\nNumpy test successful`))}catch(e){throw console.error("Numpy test failed:",e),d((n=>`${n}\nNumpy test failed: ${e.message}`)),e}if(s.runPython)try{s.runPython("import gc; gc.collect()")}catch(e){console.warn("Failed to run garbage collection:",e)}clearTimeout(t),i(s),c("Setup complete"),d(null)}catch(n){throw console.error("Package loading error:",n),d(`Failed to load packages: ${n.message}`),c("Failed to load packages"),n}}catch(t){console.error("Pyodide error:",t),d(t.message),c("Failed")}})()}),[]);const g=()=>(0,o.jsxs)("div",{className:"fixed bottom-4 right-4 bg-white dark:bg-gray-800 p-4 rounded-lg shadow-lg max-w-md",children:[(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsx)("div",{className:"w-4 h-4 border-2 border-blue-500 border-t-transparent rounded-full animate-spin"}),(0,o.jsxs)("div",{className:"text-sm font-medium whitespace-pre-wrap",children:[l,p]})]}),a&&(0,o.jsx)("div",{className:"mt-2 text-sm text-red-500 whitespace-pre-wrap overflow-auto max-h-32",children:a})]});return(0,o.jsxs)(r.Provider,{value:{pyodide:t,error:a,loadingStatus:l},children:["Setup complete"!==l&&(0,o.jsx)(g,{}),n]})},d=e=>{let{id:n,initialPosition:t={x:100,y:100},title:a="Panel Visualization",pythonCode:d,className:l=""}=e;const{pyodide:c,error:p,loadingStatus:u}=(()=>{const e=(0,s.useContext)(r);if(!e)throw new Error("usePanelContext must be used within a PanelProvider");return e})(),[g,m]=(0,s.useState)(null),y=`panel-${n}`;(0,s.useEffect)((()=>{(async()=>{if(c)try{const e=`\nimport panel as pn\nimport numpy as np\n\n# Get the target div\ntarget = js.document.getElementById("${y}")\nif target:\n    target.innerHTML = ""\n\n# Execute visualization code\n${d}\n`;await c.runPythonAsync(e),m(null)}catch(e){m(e.message||"Unknown error occurred")}})()}),[c,d,y]);return(0,o.jsxs)(i.e,{id:n,initialPosition:t,className:`bg-white dark:bg-gray-800 rounded-lg shadow-lg overflow-hidden ${l}`,children:[(0,o.jsx)("div",{"data-window-header":!0,className:"p-2 cursor-move bg-gray-100 dark:bg-gray-700 flex justify-between items-center",children:(0,o.jsx)("span",{children:a})}),(0,o.jsx)("div",{className:"p-4",children:p||g?(0,o.jsxs)("div",{className:"p-4 bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-100 rounded",children:[(0,o.jsx)("div",{className:"font-bold",children:"Error:"}),(0,o.jsx)("div",{className:"text-sm mt-1",children:p||g})]}):"Setup complete"!==u?(0,o.jsxs)("div",{className:"p-4",children:[(0,o.jsxs)("div",{className:"animate-pulse",children:[(0,o.jsx)("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-3/4 mb-2"}),(0,o.jsx)("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-1/2"})]}),(0,o.jsx)("div",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:u})]}):(0,o.jsx)("div",{id:y,className:"min-h-[200px] min-w-[300px]"})})]})};var l=t(223);const c=()=>{const[e,n]=(0,s.useState)([]),[t,i]=(0,s.useState)(1);return(0,o.jsxs)("div",{className:"p-4 space-y-4",children:[(0,o.jsx)("div",{className:"flex items-center justify-between",children:(0,o.jsxs)("div",{className:"space-x-4",children:[(0,o.jsx)("button",{onClick:()=>{const e=`sine-wave-${t}`;n((n=>[...n,{id:e,title:`Sine Wave ${t}`,pythonCode:`\nimport numpy as np\nimport panel as pn\n\n# Create interactive widgets\namplitude = pn.widgets.FloatSlider(name='Amplitude', value=1, start=0, end=2)\nfrequency = pn.widgets.FloatSlider(name='Frequency', value=1, start=0, end=5)\nphase = pn.widgets.FloatSlider(name='Phase', value=0, start=0, end=2*np.pi)\n\n# Create the plot\nx = np.linspace(0, 10, 1000)\n\n@pn.depends(amplitude, frequency, phase)\ndef update_plot(amp, freq, ph):\n    y = amp * np.sin(freq * x + ph)\n    return pn.Column(\n        pn.pane.Markdown('## Interactive Sine Wave'),\n        pn.pane.Bokeh(pn.plotting.figure(height=300).line(x, y))\n    )\n\n# Create the layout\nlayout = pn.Column(\n    amplitude,\n    frequency,\n    phase,\n    update_plot\n)\n\nlayout.servable(target='${e}')\n      `}])),i((e=>e+1))},className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors",children:"Add Sine Wave"}),(0,o.jsx)("button",{onClick:()=>{const e=`waveform-${t}`;n((n=>[...n,{id:e,title:`Waveform ${t}`,pythonCode:`\nimport numpy as np\nimport panel as pn\nimport datashader as ds\nimport pandas as pd\n\ntry:\n    # Create interactive parameters\n    points = pn.widgets.IntSlider(name='Points', value=1000, start=100, end=10000)\n    frequency = pn.widgets.FloatSlider(name='Frequency', value=1, start=0.1, end=10)\n    noise = pn.widgets.FloatSlider(name='Noise', value=0.1, start=0, end=1)\n\n    @pn.depends(points, frequency, noise)\n    def create_waveform(n_points, freq, noise_level):\n        try:\n            x = np.linspace(0, 10, n_points)\n            base = np.sin(2 * np.pi * freq * x)\n            noise_signal = np.random.normal(0, noise_level, n_points)\n            y = base + noise_signal\n            \n            # Create datashader plot\n            cvs = ds.Canvas(plot_width=400, plot_height=300)\n            df = pd.DataFrame({'x': x, 'y': y})\n            agg = cvs.line(df, 'x', 'y')\n            img = ds.transfer_functions.shade(agg)\n            \n            return pn.Column(\n                pn.pane.Markdown('## Noisy Waveform'),\n                pn.pane.PNG(img)\n            )\n        except Exception as e:\n            return pn.pane.Markdown(f'Error: {str(e)}')\nexcept Exception as e:\n    print(f'Setup error: {str(e)}')\n\n# Create layout\nlayout = pn.Column(\n    points,\n    frequency,\n    noise,\n    create_waveform\n)\n\nlayout.servable(target='${e}')\n      `}])),i((e=>e+1))},className:"px-4 py-2 bg-green-500 text-white rounded hover:bg-green-600 transition-colors",children:"Add Waveform"})]})}),(0,o.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Create interactive visualizations by adding windows. Each window runs Python code in your browser using WASM."}),e.map(((e,n)=>(0,o.jsx)(d,{id:e.id,title:e.title,pythonCode:e.pythonCode,initialPosition:{x:100+50*n,y:100+50*n}},e.id)))]})},p=()=>(0,o.jsx)(l.IF,{children:(0,o.jsx)(a,{children:(0,o.jsx)(c,{})})})},223:(e,n,t)=>{t.d(n,{IF:()=>a,$k:()=>r});var s=t(6),i=t(374);t(712);const o=(0,s.createContext)(),r=()=>{const e=(0,s.useContext)(o);if(!e)throw new Error("useWindowContext must be used within a WindowProvider");return e},a=e=>{let{children:n}=e;const[t,r]=(0,s.useState)({}),a={windows:t,registerWindow:(0,s.useCallback)(((e,n)=>{r((t=>t[e]?t:{...t,[e]:{position:n,initialPosition:n,isVisible:!0,zIndex:Object.keys(t).length+1}}))}),[]),updateWindowPosition:(0,s.useCallback)(((e,n)=>{r((t=>({...t,[e]:{...t[e],position:n}})))}),[]),toggleWindowVisibility:(0,s.useCallback)((e=>{r((n=>{var t;return{...n,[e]:{...n[e],isVisible:!(null!==(t=n[e])&&void 0!==t&&t.isVisible)}}}))}),[]),bringToFront:(0,s.useCallback)((e=>{r((n=>{const t=Math.max(...Object.values(n).map((e=>e.zIndex)));return{...n,[e]:{...n[e],zIndex:t+1}}}))}),[])};return(0,i.jsx)(o.Provider,{value:a,children:n})}},376:(e,n,t)=>{t.d(n,{e:()=>g});var s=t(6),i=t(223),o=t(921),r=t(259),a=t(374);const d=e=>{let{children:n,onDragEnd:t}=e;const{scale:s}=(0,o.f)();return(0,a.jsx)(r.Mp,{onDragEnd:t,modifiers:[e=>{let{transform:n}=e;return{...n,x:n.x/s,y:n.y/s}}],children:n})},l="cursor-move",c="cursor-move",p="absolute window-draggable",u=s.memo((e=>{let{id:n,children:t,initialPosition:i,className:d="",dragConstraints:u,windowData:g,registerWindow:m,updateWindowPosition:y,bringToFront:h,toggleWindowVisibility:w}=e;const{scale:x}=(0,o.f)();(0,s.useEffect)((()=>{m(n,i)}),[n,i,m]);const[f,v]=(e=>{const n=s.Children.toArray(e);return[n.find((e=>{var n;return null===(n=e.props)||void 0===n?void 0:n["data-window-header"]})),n.filter((e=>{var n;return!(null!==(n=e.props)&&void 0!==n&&n["data-window-header"])}))]})(t),{setNodeRef:b,attributes:j,listeners:P,style:C,isDragging:N,transform:k}=(e=>{let{id:n,position:t}=e;const{scale:s}=(0,o.f)();return(0,r.PM)({id:n,data:{position:t}})})({id:n,position:g.position});(0,s.useEffect)((()=>{N&&h(n)}),[N,h,n]);const $=`${f.props.className||""} ${N?l:c}`,S=g.position.x,W=g.position.y;return(0,a.jsx)("div",{ref:b,style:{display:g.isVisible?"block":"none",position:"absolute",transform:`translate3d(${S+((null===k||void 0===k?void 0:k.x)||0)}px, ${W+((null===k||void 0===k?void 0:k.y)||0)}px, 0)`,zIndex:g.zIndex,touchAction:"none",...C},className:`${p} ${d}`,onClick:()=>h(n),children:(0,a.jsxs)("div",{className:"h-full",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between w-full",children:[(0,a.jsx)("div",{...j,...P,className:`flex-1 ${$}`,children:f.props.children}),(0,a.jsx)("button",{onClick:e=>{e.stopPropagation(),w(n)},className:"text-gray-400 hover:text-white transition-colors w-8 h-8 flex items-center justify-center flex-lg hover:bg-gray-700",children:"\xd7"})]}),(0,a.jsx)("div",{className:"pointer-events-auto",children:v})]})})}));u.displayName="WindowContent";const g=e=>{const{windows:n,registerWindow:t,updateWindowPosition:s,bringToFront:r,toggleWindowVisibility:l}=(0,i.$k)(),c=n[e.id];if(!c)return null;const{scale:p}=(0,o.f)();return(0,a.jsx)(d,{onDragEnd:n=>{if(n.delta){const t={x:c.position.x+n.delta.x,y:c.position.y+n.delta.y};s(e.id,t)}},children:(0,a.jsx)(u,{...e,windowData:c,registerWindow:t,updateWindowPosition:s,bringToFront:r,toggleWindowVisibility:l})})}}}]);
//# sourceMappingURL=610.5201b519.chunk.js.map